# Qt5-地铁换乘

## 功能

* 初始化上海市地铁线路图
* 在展示框内可通过鼠标拖动进行线路图查看
* 在菜单栏中可通过放大缩小或者快捷键放大缩小或者在展示框外部使用滚轮，线路图能够自适应放大缩小进行查看
* 通过点击外围的地铁线路按钮，可以查看单条地铁的线路效果
* 通过鼠标点击站点，会显示相应的站点信息
* 直接输入名字进行线路的添加
* 通过文本输入形式，输入经纬度以及给定的名字，进行新站点以及新线路的添加
* 根据输入的站点名字，进行最短距离的地铁换乘提示
* 换乘提示将显示在程序最上方
* 换乘路线将以图形化形式显示在展示框内

## 设计思想

本题要求实现上海市地铁的换乘服务程序，在这其中几个明显的要素即是站、边、和地铁线路，对于站点，每一个站点的站点信息、经纬度、是否可以换乘、所属地铁线路等信息是其所具有的，对于边，每一条连接边的所属地铁线路、该边的直线距离等信息是其所具有的，对于地铁线路，每一条线的名字、所包含站点等信息是其所具有的，因此可将站点、边、地铁线路分别作为类进行封装，而后在程序实现中使用一个Graph类包含以上所有类别。

针对于地铁线路查看的功能，若是查看某条特定地铁线路，只需针对于地铁线路类中的该条特定线路，将其所包含的站点以及边展示即可，而对于按钮的设置，由于会出现一个按钮多功能的形式，因此需要设置is_checkable()==true。而对于鼠标拖动展示，则需要相应的鼠标事件进行追踪，而后scroll area中的vertical bar以及horizontal bar的值设定为相应移动值即可。对于滚轮缩放，则需要调整画图的比例，根据滚轮事件，在一定范围内，若滚轮的delta为正值，则将权值增大，若滚轮的delta为负值，则将权值缩小，而后重新绘制即可。

对于换乘程序而言，真实路网的拓扑结构非常复杂，采用一般的深度搜索或者宽度搜索可能由于递归深度导致时间爆炸，无法在很短的时间内给出答案，由此考虑采用最短路算法中一个较为经典的算法——迪杰斯特拉算法，求取单源最短距离后，设定前驱数组对路径进行追踪而后显示即可。